<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">

        <title>Last Published Revision</title>

        <link href="content/css/styles.css" rel="stylesheet">
    </head>

    <body ng-app="app" ng-controller="appCtrl as vm">

        <div class="container">

            <div class="row title-row">
                <div class="col-md-4 col-md-offset-4 col-sm-8 col-sm-offset-2 logo-container">
                    <img class="img-responsive center-block logo" src="content/images/LastPublishedRevisionQsmall.png" alt="">
                </div>
            </div>
            
            <div class="row" ng-show="vm.showData">
                <div class="col-md-4 col-md-offset-4">
                    <div class="release-status center-block">
                        <h3>
                            <span class="label label-success" ng-class="vm.releaseIsSoon ? 'label-outdated' : 'label-released'">
                                <span class="glyphicon release-check"  aria-hidden="true"></span>{{vm.releaseIsSoon ? 'About to Release' : 'Just Released'}}
                            </span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class="row" ng-show="vm.showData">
                <div class="progress-section col-md-8 col-md-offset-2 col-sm-12">
                    
                    <div class="pull-left">
                        <p class="description-label">Days in edit</p>
                    </div>
                    
                    <div class="pull-right col-md-7 col-sm-12" >
                        <div class="current-release-count" ng-class="vm.isOverAverage ? 'count-outdated' : 'count-edit'"">
                            {{vm.currentRelease.daysSinceLastRelease}}
                        </div>
                        <div class="release-month">
                            {{vm.currentRelease.dateMonthYear}}
                        </div>
                        <div class="progress-bar-container pull-left">
                            <div class="progress">
                                <div class="progress-bar"  ng-class="vm.isOverAverage ? 'progress-bar-outdated' : 'progress-bar-edit'" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{vm.getReleasePercentage(vm.currentRelease.daysSinceLastRelease)}}%">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>


            <div class="row" ng-show="vm.showData">
                <div class="progress-section col-md-8 col-md-offset-2 col-sm-12">
                    <div class="pull-left">
                        <div class="description-label">Average</div>
                    </div>
                    <div class="pull-right col-md-7 col-sm-12">
                        <div class="release-count">
                            {{vm.averageReleaseTime}}
                        </div>
                        <div class="progress-bar-container pull-left">
                            <div class="progress">
                                <div class="progress-bar progress-bar-average" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{vm.getReleasePercentage(vm.averageReleaseTime)}}%">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" ng-show="vm.showData">
                <div class="progress-section col-md-8 col-md-offset-2 col-sm-12">
                    <div class="pull-left">
                        <p class="description-label">History</p>
                    </div>

                    <div ng-repeat="release in vm.releases" class="pull-right col-md-7 col-sm-12">
                        <div class="release-count">
                            {{release.daysSinceLastRelease}}
                        </div>
                        <div class="release-month">
                            {{release.name}}
                        </div>
                        <div class="progress-bar-container pull-left">
                            <div class="progress">
                                <div class="progress-bar progress-bar-past" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: {{vm.getReleasePercentage(release.daysSinceLastRelease)}}%">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
        <footer ng-show="vm.showData" class="hidden-sm">
            
        </footer>

        <script src="lib/jquery/dist/jquery.min.js"></script>
        <script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>

        <script src="lib/angular/angular.js"></script>
        <script src="lib/angular-ui-router/release/angular-ui-router.min.js"></script>
        <script src="lib/async/lib/async.js"></script>

        <script src="app/app.module.js"></script>
        <script src="app/appCtrl.js"></script>
        <script src="app/mathService.js"></script>
        <script src="app/dateService.js"></script>
        <script src="app/githubService.js"></script>
        <script src="app/qualtraxReleaseService.js"></script>
    </body>
</html>